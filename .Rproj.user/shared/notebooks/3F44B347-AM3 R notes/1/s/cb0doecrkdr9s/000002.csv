"1","
<!-- rnb-source-begin eyJkYXRhIjoiYGBgclxuIyBzaW11bGF0aW5nIGRhdGFcbnNldC5zZWVkKDIwMjEpXG5uIDwtIDMwMDYgIyBudW1iZXIgb2Ygb2JzZXJ2YXRpb25zIDkgKiAzMzRcbm9yaWdfeCA8LSByZ2FtbWEobiwgc2hhcGUgPSAyLCByYXRlID0gMC4yKSAjIHNpbXVsYXRpbmcgc2FtcGxlIG9mIHgnc1xuXG5cbiMgZGVmaW5pbmcgdGhlIGRlZHVjdGlibGVzIGFuZCBsaW1pdHMgZm9yIGVhY2ggY2xhaW1cbmRlZHVjdGlibGVzID0gcmVwKGMocmVwKDEsIDMpLCByZXAoMywgMyksIHJlcCg1LCAzKSksIDMzNClcbmxpbWl0cyA9IHJlcChjKDE1LCAyMCwgMzApLCAzICogMzM0KSArIGRlZHVjdGlibGVzXG4jIGxpbWl0IGlzIG9uIHBheW1lbnQsIG5vdCByYXcgbG9zcyEhIGkuZSBsb3NzIC0gZGVkdWN0aWJsZXMgPCBsaW1pdFxuIyAjIEhlbmNlIHdoeSB3ZSBhZGQgdGhlIGRlZHVjdGlibGUgYW1vdW50IHRvIHRoZSBsaW1pdFxuIyBkZWR1Y3RpYmxlcyB0cnVuY2F0ZSB0aGUgZGF0YSwgbGltaXRzIGNlbnNvciB0aGUgZGF0YVxuXG4jIGFwcGx5aW5nIGRlZHVjdGlibGVzIGFuZCBsaW1pdHNcbnggPC0gIG9yaWdfeFxuIyAjIGZpbmRpbmcgd2hpY2ggY2xhaW1zIGFyZSBjZW5zb3JlZFxuY2Vuc29yZWQgPC0gIHg+bGltaXRzIFxueFtjZW5zb3JlZF0gPC0gIGxpbWl0c1tjZW5zb3JlZF0gIyBtYWtpbmcgdGhlIGxlZnQgY29sdW1uc1xuIyAjIEZpbmRpbmcgd2hpY2ggY2xhaW1zIGFyZSBoaWdoZXIgdGhhbiBkZWR1Y3RpYmxlc1xuZGVkdWN0ZWQgPC0gIHggPiBkZWR1Y3RpYmxlcyBcbnggPC0geFtkZWR1Y3RlZF0gIyByZW1vdmUgYWxsIHRob3NlIGxvd2VyIHRoYW4gZGVkdWN0aWJsZXMgKHRydW5jYXRpbmcpXG5cbiMgQ3JlYXRpbmcgZmluYWwgZGZcbmNsYWltcyA8LSAgZGF0YS5mcmFtZSh4ID0geCxcbiAgICAgICAgICAgICAgICAgICAgICBkZWR1Y3QgPSBkZWR1Y3RpYmxlc1tkZWR1Y3RlZF0sICMgdHJ1bmNhdGlvbiB0aHJlc2hvbGRcbiAgICAgICAgICAgICAgICAgICAgICBsaW1pdEkgPSBjZW5zb3JlZFtkZWR1Y3RlZF0pICMgd2hldGhlciB2YWx1ZSB3YXMgY2Vuc29yZWQgb3Igbm90XG5gYGAifQ== -->

```r
# simulating data
set.seed(2021)
n <- 3006 # number of observations 9 * 334
orig_x <- rgamma(n, shape = 2, rate = 0.2) # simulating sample of x's


# defining the deductibles and limits for each claim
deductibles = rep(c(rep(1, 3), rep(3, 3), rep(5, 3)), 334)
limits = rep(c(15, 20, 30), 3 * 334) + deductibles
# limit is on payment, not raw loss!! i.e loss - deductibles < limit
# # Hence why we add the deductible amount to the limit
# deductibles truncate the data, limits censor the data

# applying deductibles and limits
x <-  orig_x
# # finding which claims are censored
censored <-  x>limits 
x[censored] <-  limits[censored] # making the left columns
# # Finding which claims are higher than deductibles
deducted <-  x > deductibles 
x <- x[deducted] # remove all those lower than deductibles (truncating)

# Creating final df
claims <-  data.frame(x = x,
                      deduct = deductibles[deducted], # truncation threshold
                      limitI = censored[deducted]) # whether value was censored or not
```

<!-- rnb-source-end -->
"
"0","```r
# simulating data
set.seed(2021)
n <- 3006 # number of observations 9 * 334
orig_x <- rgamma(n, shape = 2, rate = 0.2) # simulating sample of x's


# defining the deductibles and limits for each claim
deductibles = rep(c(rep(1, 3), rep(3, 3), rep(5, 3)), 334)
limits = rep(c(15, 20, 30), 3 * 334) + deductibles
# limit is on payment, not raw loss!! i.e loss - deductibles < limit
# # Hence why we add the deductible amount to the limit
# deductibles truncate the data, limits censor the data

# applying deductibles and limits
x <-  orig_x
# # finding which claims are censored
censored <-  x>limits 
x[censored] <-  limits[censored] # making the left columns
# # Finding which claims are higher than deductibles
deducted <-  x > deductibles 
x <- x[deducted] # remove all those lower than deductibles (truncating)

# Creating final df
claims <-  data.frame(x = x,
                      deduct = deductibles[deducted], # truncation threshold
                      limitI = censored[deducted]) # whether value was censored or not
```"
